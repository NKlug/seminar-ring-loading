
\documentclass[8pt]{beamer}

\usepackage[german]{babel}
\usepackage[utf8]{inputenc}
\usepackage{pdfpages}
\usepackage{color}
\usepackage{graphicx, import}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{physics} % norm
\usepackage{tikz}
\usepackage{tkz-euclide}
\usepackage{enumitem}
\usepackage{pgfplots}
\usepackage{multicol}
\usepackage{tabularx}
\usepackage[numbers, square]{natbib}
\usepackage{mathtools}
\usepackage{transparent}
\usepackage{caption} % change style of figure 
\usepackage{subcaption}
\usepackage{csquotes} % automatic left quotation marks
\usepackage{booktabs}
\usepackage[noline]{algorithm2e}
\usepackage[super]{nth}
\usepackage{autonum} % auto equation numbering
\usepackage{bbm}
\usepackage{scalerel,stackengine}
\usepackage{mdframed}
\usepackage{array}

\captionsetup*[subfigure]{position=bottom}

\MakeOuterQuote{"}

\usetikzlibrary{calc, positioning,backgrounds, fit, patterns,shapes, snakes, chains, arrows, decorations.markings, arrows.meta}
%\tikzexternalize[prefix=out/figures/]
\newcolumntype{Y}{>{\centering\arraybackslash}X} % centered equidistant columns
\newcolumntype{R}[1]{>{\PreserveBackslash\raggedleft}p{#1}}
\newcolumntype{L}[1]{>{\PreserveBackslash\raggedright}p{#1}}

\bibliographystyle{plainnat}
\usetheme[block=transparent]{metropolis}
\usecolortheme{orchid}
\setbeamercolor{block body}{use=structure,fg=black,bg=structure.bg}
\setbeamercolor{block title}{use=structure,fg=black,bg=structure.bg}
\setbeamertemplate{frame footer}{\insertshortauthor\hfill\insertshortinstitute}
\setbeamercolor{footline}{fg=gray}

\DeclarePairedDelimiterX{\infdiv}[2]{(}{)}{%
	#1\;\delimsize\|\;#2%
}

\renewcommand{\epsilon}{\varepsilon}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator{\JSD}{JS}
\DeclareMathOperator{\KL}{KL}
\newcommand{\T}{\mathrm{T}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cZ}{\mathcal{Z}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\fL}{\mathfrak{L}}
\newcommand{\RL}{\textsc{RingLoading}\xspace}
\newcommand{\RRL}{\textsc{RRL}\xspace}
\newcommand{\RRLWC}{\textsc{RRLwC}\xspace}
\newcommand{\dOne}{\mathbbm{1}}
\newcommand{\Lopt}{L^{\mathrm{opt}}}

\newcommand\equalhat{\mathrel{\stackon[1.5pt]{=}{\stretchto{%
				\scalerel*[\widthof{=}]{\wedge}{\rule{1ex}{3ex}}}{0.5ex}}}}

\makeatletter
\DeclareRobustCommand\onedot{\futurelet\@let@token\@onedot}
\def\@onedot{\ifx\@let@token.\else.\null\fi\xspace}

\def\eg{\emph{e.g}\onedot} \def\Eg{\emph{E.g}\onedot}
\def\ie{\emph{i.e}\onedot} \def\Ie{\emph{I.e}\onedot}
\def\cf{\emph{c.f}\onedot} \def\Cf{\emph{C.f}\onedot}
\def\etc{\emph{etc}\onedot} \def\vs{\emph{vs}\onedot}
\def\iid{\emph{i.i.d}\onedot} \def \Iid{\emph{I.i.d}\onedot}
\def\wrt{w.r.t\onedot} \def\dof{d.o.f\onedot}
\def\etal{\emph{et al}\onedot}
\makeatother


\makeatletter
\def\th@claim{%
	\normalfont % body font
	\setbeamercolor{block title example}{bg=red!65!black,fg=white}
	\setbeamercolor{block body example}{bg=red!80!black!20,fg=black}
	\setbeamercolor{example text}{fg=red}
	\def\inserttheoremblockenv{exampleblock}
}
\makeatother
\theoremstyle{claim}
\newtheorem{mytheorem}[theorem]{Theorem}

%\theoremstyle{theorem}
%\newtheorem{lemma}[definition]{Lemma}
%\newtheorem{corollary}[definition]{Corollary}
%\newtheorem{remark}[definition]{Remark}
%\newtheorem{proposition}[definition]{Proposition}
%\theoremstyle{break}
%\newtheorem{theorem}[definition]{Theorem}
%\newtheorem{condition}[definition]{Condition}
\setbeamertemplate{section in toc}[sections numbered]
\setbeamertemplate{subsection in toc}{\leavevmode\leftskip=3.2em\rlap{\hskip-2em\inserttocsectionnumber.\inserttocsubsectionnumber}\inserttocsubsection\par}
\setbeamercolor{section in toc}{fg=black}
\setbeamercolor{subsection in toc}{fg=black}
\setbeamercolor{toc}{fg=black}

\AtBeginSection[]{}

\title[]{Das Ring Loading Problem}
%\subtitle{Seminar \glqq Mathematische Aspekte des maschinellen Lernens\grqq}
\author[Nikolas Klug]{Nikolas Klug}
\institute[Universität Augsburg]{Universität Augsburg}
\date{23. Dezember 2021}


\begin{document}
	{
	\setbeamertemplate{footline}{}
	\begin{frame}
		\titlepage
	\end{frame}
	}
	\addtocounter{framenumber}{-1}

	\begin{frame}{Hauptquelle}
%		\begin{NoHyper}
%			\tableofcontents[]
%		\end{NoHyper}

		\emph{The Ring Loading Problem},\\
		 Alexander Schrijver, Paul Seymour, Peter Winkler, 1999,\\
		 \emph{SIAM Review 41 (4).}\\
	\end{frame}
	
	\begin{frame}{Problemstellung}
		Das Ring Loading Problem tritt bei der Planung von SONET Ringen auf.
		
	\end{frame}

	\section{Formalisierung}
	
	\begin{frame}{Formalisierung}
		\begin{columns}
			\column{0.6\linewidth}
			Ring $\equalhat$ Graph mit $n$ Knoten.\\
			Knotenmenge $V = [n] = \{1, 2, 3, \dots, n\}$.\\
			Kantenmenge $E = \{\{k, k+1\}\ |\ k \in [n]\}$\\
			~\\\pause
			Für jedes Paar von Knoten $i, j \in [n], i < j$: \emph{Nachfrage} (engl. demand) $d_{i, j} \in \R_{\geq 0}$.\\
			~\\\pause
			$d_{i,j}$ wird \emph{vorwärts} gerouted, falls die Kante $\{n, 1\}$ nicht genutzt wird.\\
			Sonst wird $d_{i,j}$ \emph{rückwärts} gerouted.
			\column{0.4\linewidth}
			\input{figures/empty_ring}
		\end{columns} 
	\end{frame}
	
	\begin{frame}{Routings und Lasten}
		\begin{columns}
			\column{0.6\linewidth}
			\begin{definition}[Routing]
			\label{def:routing}
			Ein \emph{reellwertiges Routing} in einem Ring der Größe $n \in \N$ ist eine Funktion
			\begin{equation}
				\Phi: \{(i, j)\ |\ i, j \in [n], i < j \} \rightarrow [0, 1] \ .
				\end{equation}
				Ein \emph{binäres Routing} ist ein reellwertiges Routing $\Phi$, das nur Werte in $\{0, 1\}$ annimmt. 
			\end{definition}\pause		
			\begin{definition}[Kantenlast, Ringlast]
				\label{def:edge-load}
				Sei $\Phi$ ein Routing.
				Für jede Kante $\{k, k+1\}$, $k \in [n]$, definieren wir die \emph{Kantenlast} $L_k(\Phi)$ als:
				\begin{equation}
					\label{eq:edge-load}
					L_k(\Phi) \coloneqq \sum_{\substack{1 \leq i < j \leq n,\\ k \in [i, j)}} d_{i, j} \Phi(i, j) + \sum_{\substack{1 \leq i < j \leq n,\\ k \notin [i, j)}} d_{i, j} (1 - \Phi(i, j)) \ .
				\end{equation}
				Die \emph{Ringlast} $L(\Phi)$ ist die maximale Kantenlast des Routings $\Phi$.
			\end{definition}
			\column{0.4\linewidth}
			\input{figures/empty_ring}
		\end{columns} 
	\end{frame}

	\begin{frame}{Das Ring Loading Problem}
		\begin{center}
			\begin{mdframed}
				\centering
				\textsc{RingLoading}\\[0.7em]
				\begin{tabularx}{\textwidth}{rl}
					{\bfseries Eingabe}: & Ringgröße $n \in \N$, und Nachfragen $d_{i, j} \in \R_{\geq 0}$ für alle $1 \leq i<j\leq n$.\\
					{\bfseries Ausgabe}: & Binäres Routing $\Phi$, welches $L(\Phi) = \max_{i \in [n]} L_i(\Phi)$ minimiert.
				\end{tabularx}
			\end{mdframed}
		\end{center}\pause
		Instanzgröße: $\cO(K \log D + \log n)$, wobei $D$ maximale Nachfrage und $K$ Anzahl nicht-negativer Nachfragen.
	\end{frame}

	\begin{frame}{NP-Vollständigkeit}
		\RL als Entscheidungsproblem:
		\begin{quote}
			"Gegeben eine \RL Instanz und $T \in \N$, existiert ein binäres Routing $\Phi$ mit Ringlast $L(\Phi) \leq T$?"
		\end{quote}\pause
		\begin{mytheorem}
			\RL als Entscheidungsproblem ist NP-vollständig.
		\end{mytheorem}\pause
		\begin{proof}\let\qed\relax
			\underline{\RL liegt in NP:} Routing ist Zertifikat der Größe $\cO(K)$\\\pause
			\underline{NP-Vollständigkeit:}\\
			Wir reduzieren \textsc{PARTITION}.
		    Eine Instanz $J$ besteht aus $m$ natürlichen Zahlen $z_1, \ldots, z_m \in \N$.\\
		    Frage: Existiert eine Menge $S \subseteq [m]$, sodass:
			\begin{equation}
				\sum_{i \in S} z_i = \frac{1}{2} \sum_{i \in [m]} z_i = \sum_{j \in [m] \setminus S} z_j\ .
			\end{equation}
		\end{proof}
	\end{frame}

	\begin{frame}
		\begin{columns}
		\column{0.6\linewidth}
		Wir konstruieren die folgende \RL Instanz:
		\centering
		\begin{tikzpicture}[font=\scriptsize, node/.style={circle,thick,draw},
			l_2/.style={line width =0.25mm},
			scale=1, transform shape]
			% equidistant points and arc
			\foreach \x [count=\p] in {0,...,7} {
				\node[shape=circle,fill=black, scale=0.5] (\p) at (\x*45-135:2) {};
			};
			\foreach \x [count=\p] in {0,...,3} {
				\draw (225 + \x*45:1.7) node {\p};
				%				\draw (-30-\x*60:2.4) node {$\bar{\p}$};
			}; 
			\draw (225 + 4*45:1.7) node {$m$};
			\draw (225 + 5*45:1.7) node {$m+1$};
			\draw (225 + 6*45:1.6) node {$m+2$};
			\draw (225 + 7*45:1.45) node {$m+3$};
			
			\draw[l_2] (5) arc (45:360:2);
			\draw[line width =1.3pt, line cap=round, dash pattern=on 0pt off 10pt] (12:2) arc(12:35:2);
			
			
			\draw[<->] (1)  to [out=157.5,in=-90] (180:2.5) to [out=90,in=-170](7);
			\draw[<->] (2)  to [out=-157.5,in=-67.5] (-157.5:2.8) to [out=112.5,in=-180] (7);
			\draw[<->] (3)  to [out=-112.5,in=-45] (-135:3.2) to [out=135,in=-190] (7);
			\draw[<->] (4)  to [out=67.5,in=-22.5] (67.5:3) to [out=157.5,in=100] (7);
			\draw[<->] (5)  to [out=112.5,in=0] (90:2.7) to [out=180,in=85] (7);
			
			\draw[<->] (6)  to [out=160,in=22.5] (112.5:2.2) to [out=-157.5,in=60] (7);
			\draw[<->] (8)  to [out=100,in=-135] (150:2.2) to [out=45,in=-155] (7);
			
			\node (a) at (-142:2.3) {$z_1$};
			\node (b) at (-105:2.45) {$z_2$};
			\node (c) at (-85:2.8) {$z_3$};
			\node (d) at (45:3.1) {$z_4$};
			\node (e) at (58:2.5) {$z_m$};
			\node (d) at (95:2.3) {$\frac{T}{2}$};
			\node (f) at (175:2.2) {$\frac{T}{2}$};
			
			\node (left) at (-3, 0) {};
			\node (right) at (3, 0) {};
			%		\draw[dashed] (1) -- (3) -- (5) -- (1);
			% axes
			%		\draw [dotted, gray] (-2.6,0) -- (2.6,0);
			%		\draw [dotted, gray] (0,-2.15) -- (0,2.15);
		\end{tikzpicture}\\
		wobei $T =\sum_{i \in [m]} z_i$.\\\pause
		\column{.4\linewidth}
		Sei $A \subseteq [m]$ Lösung von Partition.
		Wir wählen
		\begin{align}
			\Phi(i, m+2) &= 1 \quad \forall i \in A \\
			\Phi(i, m+2) &= 0 \quad \forall i \in [m] \setminus A \\
			\Phi(m+1, m+2) & = \Phi(m+2, m+3) = 1 \ .
		\end{align}\pause
		
		Sei $\Phi$ Lösung der \RL Instanz.
		Dann löst
		\begin{equation}
			A' \coloneqq \{i \ |\ i \in [m] \text{ and } \Phi(i, m+2) = 1\}
		\end{equation}
		die \textsc{Partition} Instanz.
		\qed
	\end{columns}
	\end{frame}

	\begin{frame}{Relaxed Ring Loading}
		Für den Approximationsalgorithmus lösen wir zunächst folgendes Problem:
		\vspace{5mm}
		\begin{center}
			\begin{mdframed}
				\centering
				\textsc{RelaxedRingLoading} (\textsc{RRL})\\[0.7em]
				\begin{tabular}{rl}
					{\bfseries Eingabe}: & Ringgröße $n \in \N$, und Nachfragen $d_{i, j} \in \R_{\geq 0}$ für alle $1 \leq i<j\leq n$.\\
					{\bfseries Ausgabe}: & Reellwertiges Routing $\Phi$, welches $L(\Phi) = \max_{i \in [n]} L_i(\Phi)$ minimiert.
				\end{tabular}
			\end{mdframed}
		\end{center}
	\end{frame}
	
	\begin{frame}{Relaxed Ring Loading}
		Relaxed Ring Loading
	\end{frame}
	
	\begin{frame}{Approximations Algorithmus}
		Überblick über Approximations algo: 1. Bestimme "dünn-besetzte" Lösung von RRL 2. Reroute split demands 
	\end{frame}

	\begin{frame}{Minimale Lösungen}
		Definition Minimaler Lösungen
	\end{frame}

	\begin{frame}{Charakterisiung minimaler Lösungen}
		Theorem: nur wenige gesplittete demands	\\
		Definitionen crossing, parallel	
	\end{frame}
		
	\begin{frame}{RelaxedRingLoading mit Kapazitäten}
		Definition Kapazitäten und Problem mit Kapazitäten	
	\end{frame}
	
	\begin{frame}{Schnitte}
		Definition Schnitte, schneiden, demand across cut, cut condition
	\end{frame}

	\begin{frame}{Charakterisierung der Lösbarkeit}
		Lösbar genau dann wenn cut condition erfüllt + Beweis
	\end{frame}

	\begin{frame}{On the way to an algorithm...}
		Definition der Kapazitäten + einige Beobachtungen dazu.
	\end{frame}

	\begin{frame}{Einige Beobachtungen}
		Definition der Kapazitäten + einige Beobachtungen dazu.
	\end{frame}

	\begin{frame}{Der Algorithmus}
		Definition der Kapazitäten + einige Beobachtungen dazu.
	\end{frame}

	\section{Transformation in ein binäres Routing}
	\begin{frame}{Transformation in ein binäres Routing}
		Schrumpfen der Instanz
	\end{frame}

	\begin{frame}{Umrouten gesplitter Nachfragen}
		Änderung der Kantenlast
	\end{frame}

	\begin{frame}{Wahl des Umroutings}
		content...
	\end{frame}
	
	\begin{frame}{Approximationsgüte}
		content...
	\end{frame}
	
	\begin{frame}[allowframebreaks]
		\nocite{schrijver99, karp72}
		\bibliography{bibliography.bib}
	\end{frame}


\end{document}